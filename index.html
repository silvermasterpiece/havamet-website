<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>HAVAMET | HavacÄ±lÄ±k Meteorolojisi DerneÄŸi</title>
  <link rel="stylesheet" href="style.css" />
</head>
<body>
  <div class="top-bar">
    <div class="hamburger" onclick="toggleMenu()">â˜°</div>
    <div class="right-controls">
      <div class="lang-switcher">
        <button onclick="setLanguage('tr')" title="TÃ¼rkÃ§e">
          <img src="assets/flags/tr.png" alt="TR" width="24" />
        </button>
        <button onclick="setLanguage('en')" title="English">
          <img src="assets/flags/gb.png" alt="EN" width="24" />
        </button>
      </div>
      <div class="mode-toggle">
        <button id="modeButton" onclick="toggleMode()" title="Tema DeÄŸiÅŸtir">ğŸŒ™</button>
      </div>
    </div>
  </div>

  <header class="kapak">
    <img src="assets/images/kapak.png" alt="Kapak GÃ¶rseli" class="kapak-gorsel" />
    <div class="kapak-icerik">
      <img src="assets/images/logo.png" alt="HAVAMET Logo" class="logo" />
    </div>
  </header>

  <nav id="navMenu">
    <ul class="menu">
      <li><a href="index.html" data-tr="Anasayfa" data-en="Home">Anasayfa</a></li>
      <li class="dropdown">
        <a href="#" data-tr="DerneÄŸimiz" data-en="Our Association">DerneÄŸimiz</a>
        <ul class="dropdown-menu">
          <li><a href="tarihce.html" data-tr="TarihÃ§e" data-en="History">TarihÃ§e</a></li>
          <li><a href="misyon-vizyon.html" data-tr="Misyon & Vizyon" data-en="Mission & Vision">Misyon & Vizyon</a></li>
          <li><a href="yonetim.html" data-tr="YÃ¶netim ve Organizasyon ÅemasÄ±" data-en="Management and Organization Chart">YÃ¶netim ve Organizasyon ÅemasÄ±</a></li>
          <li><a href="tuzuk.html" data-tr="TÃ¼zÃ¼k" data-en="Regulation">TÃ¼zÃ¼k</a></li>
          <li><a href="faaliyet.html" data-tr="Faaliyet RaporlarÄ±" data-en="Activity Reports">Faaliyet RaporlarÄ±</a></li>
          <li><a href="subeler.html" data-tr="Åubelerimiz" data-en="Our Branches">Åubelerimiz</a></li>
          <li><a href="calisma-gruplari.html" data-tr="Ã‡alÄ±ÅŸma GruplarÄ±" data-en="Working Groups">Ã‡alÄ±ÅŸma GruplarÄ±</a></li>
        </ul>
      </li>
      <li><a href="haberler.html" data-tr="Haberler" data-en="News">Haberler</a></li>
      <li><a href="galeri.html" data-tr="Galeri" data-en="Gallery">Galeri</a></li>
      <li><a href="linkler.html" data-tr="Linkler" data-en="Links">Linkler</a></li>
      <li><a href="iletisim.html" data-tr="Ä°letiÅŸim" data-en="Contact">Ä°letiÅŸim</a></li>
    </ul>
  </nav>

  <main class="main-container">
    <div class="content-left">
      <section class="hero">
        <h2 data-tr="HAVAMET'e HoÅŸ Geldiniz" data-en="Welcome to HAVAMET"></h2>
        <p data-tr="Meteoroloji Ã§alÄ±ÅŸanlarÄ±nÄ± bir Ã§atÄ± altÄ±nda topluyoruz. Dernek taslak sitesidir."
           data-en="Uniting meteorology professionals under one roof. This is a draft site."></p>
      </section>

      <section class="duyurular">
        <h3 data-tr="Duyurular" data-en="Announcements">Duyurular</h3>
        <ul>
          <li data-tr="ğŸ“Œ Dernek kuruluÅŸ sÃ¼reci devam ediyor..."
              data-en="ğŸ“Œ The association establishment process continues...">ğŸ“Œ Dernek kuruluÅŸ sÃ¼reci devam ediyor...</li>
          <li data-tr="ğŸ—•ï¸ Ä°lk Genel Kurul ToplantÄ±sÄ± planlanÄ±yor..."
              data-en="ğŸ—•ï¸ The first General Assembly Meeting is being planned.">ğŸ—•ï¸ Ä°lk Genel Kurul ToplantÄ±sÄ± planlanÄ±yor...</li>
        </ul>
      </section>
    </div>

    <aside class="content-right">
      <section class="hava-durumu-blok">
        <h3 data-tr="Hava Durumu" data-en="Weather">Hava Durumu</h3>
        <div id="konum">Konum alÄ±nÄ±yor...</div>
        <div id="sicaklik"></div>
        <div id="aciklama"></div>
      </section>

      <section class="basinda-biz">
        <h3 data-tr="BasÄ±nda Biz" data-en="In The Media">BasÄ±nda Biz</h3>
        <a href="https://www.memurlar.net/haber/1142050/" target="_blank">
          <img src="assets/images/basinda.png" alt="BasÄ±nda Biz" />
        </a>
        <p data-tr="Meteoroloji Ã§alÄ±ÅŸanlarÄ± eÅŸit tazminat istiyor: AynÄ± gÃ¶klerdeyiz, ama Ã¼cretlerimiz yerde kaldÄ±"
           data-en="Meteorology employees demand equal compensation: We fly the same skies, but our salaries are grounded.">
        Meteoroloji Ã§alÄ±ÅŸanlarÄ± eÅŸit tazminat istiyor: AynÄ± gÃ¶klerdeyiz, ama Ã¼cretlerimiz yerde kaldÄ±</p>
        <a href="haberler.html" data-tr="TÃ¼m Haberler" data-en="All News">TÃ¼m Haberler</a>
      </section>

      <section class="takvim">
        <h3 data-tr="Etkinliklerimiz" data-en="Our Events">Etkinliklerimiz</h3>
        <iframe
          src="https://calendar.google.com/calendar/embed?src=tr.turkish%23holiday%40group.v.calendar.google.com&ctz=Europe%2FIstanbul"
          style="border:0" width="100%" height="200" frameborder="0" scrolling="no"></iframe>
      </section>

      <section class="galeri">
        <h3 data-tr="GALERÄ°" data-en="GALLERY">GALERÄ°</h3>
        <div class="galeri-kutu">
          <img src="assets/images/mgm.png" alt="Meteoroloji Genel MÃ¼dÃ¼rlÃ¼ÄŸÃ¼" />
          <div class="galeri-tarih">Meteoroloji Genel MÃ¼dÃ¼rlÃ¼ÄŸÃ¼</div>
        </div>
        <a href="galeri.html" class="tum-galeriler" data-tr="TÃ¼m Galeriler" data-en="All Galleries">TÃ¼m Galeriler</a>
      </section>
    </aside>
  </main>

  <footer>
    <p>&copy; 2025 HAVAMET - TÃ¼m haklarÄ± saklÄ±dÄ±r.</p>
  </footer>

  <script>
    function setLanguage(lang) {
      const elements = document.querySelectorAll('[data-tr], [data-en]');
      elements.forEach(el => {
        const text = el.getAttribute(`data-${lang}`);
        if (text) el.textContent = text;
      });
      localStorage.setItem('lang', lang);
    }

    function toggleMode() {
      const body = document.body;
      const button = document.getElementById("modeButton");
      body.classList.toggle('dark-mode');
      const isDark = body.classList.contains('dark-mode');
      localStorage.setItem('theme', isDark ? 'dark' : 'light');
      button.textContent = isDark ? 'ğŸŒ™' : 'ğŸŒ';
    }

    function toggleMenu() {
      const nav = document.getElementById("navMenu");
      nav.classList.toggle("show");
    }

    async function havaDurumuKonumaGore() {
      const API_KEY = "e217a53c2bdc462f5d5ff0d71e5a124e";

      if (!navigator.geolocation) {
        document.getElementById("konum").textContent = "Konum desteklenmiyor.";
        return;
      }

      navigator.geolocation.getCurrentPosition(async (position) => {
        const lat = position.coords.latitude;
        const lon = position.coords.longitude;
        const url = `https://api.openweathermap.org/data/2.5/weather?lat=${lat}&lon=${lon}&appid=${API_KEY}&units=metric&lang=tr`;

        try {
          const response = await fetch(url);
          const data = await response.json();

          const sehir = data.name;
          const sicaklik = Math.round(data.main.temp);
          const aciklama = data.weather[0].description;
          const icon = data.weather[0].icon;
          const iconUrl = `https://openweathermap.org/img/wn/${icon}@2x.png`;

          document.getElementById("konum").textContent = `ğŸ“ ${sehir}`;
          document.getElementById("sicaklik").innerHTML = `<img src="${iconUrl}" alt="icon" /> ${sicaklik}Â°C`;
          document.getElementById("aciklama").textContent = aciklama;

          const isNight = icon.includes('n');
          const description = data.weather[0].main.toLowerCase();
          let themeClass = '';

          if (description.includes('clear')) {
            themeClass = 'hava-durumu-acik';
          } else if (description.includes('cloud')) {
            themeClass = 'hava-durumu-bulutlu';
          } else if (description.includes('rain') || description.includes('drizzle')) {
            themeClass = 'hava-durumu-yagmurlu';
          } else if (description.includes('snow')) {
            themeClass = 'hava-durumu-karlÄ±';
          }

          const blok = document.querySelector('.hava-durumu-blok');
          blok.classList.add(isNight ? 'hava-durumu-gece' : 'hava-durumu-gunduz');
          if (themeClass) blok.classList.add(themeClass);

        } catch (e) {
          document.getElementById("konum").textContent = "Hava durumu alÄ±namadÄ±.";
        }
      }, () => {
        document.getElementById("konum").textContent = "Konum alÄ±namadÄ±.";
      });
    }

    window.onload = () => {
      havaDurumuKonumaGore();
      const lang = localStorage.getItem('lang') || 'tr';
      setLanguage(lang);
      const savedTheme = localStorage.getItem('theme');
      if (savedTheme === 'dark') {
        document.body.classList.add('dark-mode');
        document.getElementById("modeButton").textContent = 'ğŸŒ';
      }
    };
  </script>
</body>
</html>
